<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FuelFinderMX - Gasolineras</title>
    <link rel="icon" href="{{ url_for('static', filename='images/logo 16x16.ico') }}" sizes="16x16" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='images/logo 32x32.ico') }}" sizes="32x32" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='images/logo 64x64.ico') }}" sizes="64x64" type="image/x-icon">    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

    <!-- Barra de navegación principal -->
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="navbar-brand" href="#">FuelFinderMX</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" style="color: rgb(0, 0, 0);" href="Inicio">Inicio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color: rgb(0, 0, 0);" href="Mapa">Mapa</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color: rgb(0, 0, 0);" href="Gasolineras">Precios</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color: rgb(0, 0, 0);" href="Perfil">Perfil</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" style="color: rgb(0, 0, 0);" href="IniciarSesion">Iniciar sesion</a>
                </li>
            </ul>
        </div>
    </nav>
    
    <!--Campos de precios mas altos y bajos de las gasolineras-->
    <div class="container mt-5">
        <h1 class="text-center mb-4">Gasolineras</h1>
        <div class="row justify-content-center">
            <!-- Precio más bajo -->
            <div id="mas-bajo" class="col-md-5 p-3 border rounded shadow h-100">
                <h2 class="text-center">Precio más bajo</h2>
                <div class="text-center">
                    <img id="img-mas-bajo" src="" alt="Gasolinera" class="img-fluid mb-3">
                </div>
                <p><strong>Nombre:</strong> <span id="nombre-bajo"></span></p>
                <p><strong>Precio Regular:</strong> $<span id="precio-bajo"></span></p>
                <p><strong>Ubicación:</strong> <span id="ubicacion-bajo"></span></p>
            </div>

            <div class="col-md-1"></div>

            <!-- Precio más alto -->
            <div id="mas-alto" class="col-md-5 p-3 border rounded shadow h-100">
                <h2 class="text-center">Precio más alto</h2>
                <div class="text-center">
                    <img id="img-mas-alto" src="" alt="Gasolinera" class="img-fluid mb-3">
                </div>
                <p><strong>Nombre:</strong> <span id="nombre-alto"></span></p>
                <p><strong>Precio Regular:</strong> $<span id="precio-alto"></span></p>
                <p><strong>Ubicación:</strong> <span id="ubicacion-alto"></span></p>
            </div>
        </div>
    </div>

    <script>
        // URL del endpoint de tu API
        const apiUrl = "http://127.0.0.1:5000/api/precios-ubicaciones";

        // Función para formatear la ubicación
        const formatLocation = (x, y) => `Coordenadas: (${x.toFixed(4)}, ${y.toFixed(4)})`;

        // Función principal para cargar datos
        async function cargarDatos() {
            try {
                // Fetch a la API
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error(`Error en la API: ${response.status}`);
                }

                const data = await response.json();

                // Elementos HTML
                const masBajoNombre = document.getElementById('nombre-bajo');
                const masBajoPrecio = document.getElementById('precio-bajo');
                const masBajoUbicacion = document.getElementById('ubicacion-bajo');
                const masBajoImagen = document.getElementById('img-mas-bajo');

                const masAltoNombre = document.getElementById('nombre-alto');
                const masAltoPrecio = document.getElementById('precio-alto');
                const masAltoUbicacion = document.getElementById('ubicacion-alto');
                const masAltoImagen = document.getElementById('img-mas-alto');

                // Datos del precio más bajo
                const masBajo = data.mas_bajo;
                masBajoNombre.textContent = masBajo.name;
                masBajoPrecio.textContent = masBajo.prices.find(p => p.type === "Regular").price.toFixed(2);
                masBajoUbicacion.textContent = formatLocation(masBajo.x, masBajo.y);
                masBajoImagen.src = "gasolinera1.jpg"; // Cambia según tu lógica

                // Datos del precio más alto
                const masAlto = data.mas_alto;
                masAltoNombre.textContent = masAlto.name;
                masAltoPrecio.textContent = masAlto.prices.find(p => p.type === "Regular").price.toFixed(2);
                masAltoUbicacion.textContent = formatLocation(masAlto.x, masAlto.y);
                masAltoImagen.src = "gasolinera2.jpg"; // Cambia según tu lógica
            } catch (error) {
                console.error("Error al cargar los datos:", error);
            }
        }

        // Ejecutar la función al cargar la página
        window.onload = cargarDatos;
    </script>

    <!--Titulo-->
    <div class="container mt-5">
        <h2 class="text-left">Gasolineras</h2>
        <br>

        <!-- Cards Lista de Gasolineras-->
        <section>
            <div class="row justify-content-center">
                <div class="card border rounded shadow col-lg-6 mx-2" style="max-width: 540px;">
                    <div class="row no-gutters">
                        <div class="col-md-4">
                            <img src="..." alt="..." class="img-fluid">
                        </div>
                        <div class="col-md-8">
                            <div class="card-header bg-dark text-light">Gasolinera</div>
                            <div class="card-body">
                                <p class="card-text">Direccion:</p>
                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card border rounded shadow col-lg-6 mx-2" style="max-width: 540px;">
                    <div class="row no-gutters">
                        <div class="col-md-4">
                            <img src="..." alt="...">
                        </div>
                        <div class="col-md-8">
                            <div class="card-header bg-dark text-light">Gasolinera</div>
                            <div class="card-body">
                                <p class="card-text">Direccion:</p>
                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row justify-content-center">
                <div class="card border rounded shadow col-lg-6 mx-2" style="max-width: 540px;">
                    <div class="row no-gutters">
                        <div class="col-md-4">
                            <img src="..." alt="...">
                        </div>
                        <div class="col-md-8">
                            <div class="card-header bg-dark text-light">Gasolinera</div>
                            <div class="card-body">
                                <p class="card-text">Direccion:</p>
                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card border rounded shadow col-lg-6 mx-2" style="max-width: 540px;">
                    <div class="row no-gutters">
                        <div class="col-md-4">
                            <img src="..." alt="...">
                        </div>
                        <div class="col-md-8">
                            <div class="card-header bg-dark text-light">Gasolinera</div>
                            <div class="card-body">
                                <p class="card-text">Direccion:</p>
                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    </section>

    <!--Footer de informacion de contacto-->

    <footer class="bg-dark text-light pt-5 pb-3 px-5 mt-5 ">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5 class="text-left">Contacto</h5>
                    <br>
                    <ul class="list-unstyled">
                        <li class="custom-text text-left"><i class="fa-solid fa-map"></i> Direccion: <a
                                href="https://maps.app.goo.gl/v59XQ16W5ncPVQXx8">Km 3.5 Carretera
                                Chihuahua a Aldama Colinas de León, 31313, 31300 Chihuahua, Chihuahua · 06 km</a>
                        </li>
                        <li class="custom-texttext-left"><i class="fa-solid fa-envelope"></i> Email 1: <a
                                href="mailto:fuelfindermx@outlook.com">fuelfindermx@outlook.com</a>
                        </li>
                        <li class="custom-text text-left"><i class="fa-solid fa-envelope"></i> Email 2: <a
                                href="mailto:fuelfindermx@gmail.com">fuelfindermx@gmail.com</a>
                        </li>
                        <li class="custom-texttext-left"><i class="fa-solid fa-phone"></i> Teléfono: 614-552-0929</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5 class="text-left">Redes Sociales</h5>
                    <br>
                    <ul class="list-unstyled">
                        <li class="custom-text text-left"> <i class="fa-brands fa-facebook"></i> Facebook: <a
                                href="https://www.facebook.com/profile.php?id=61568152538733">FuelFinderMX</a>
                        </li>
                        <li class="custom-text text-left"> <i class="fa-brands fa-instagram"></i> Instagram: <a
                                href="https://www.instagram.com/fuelfindermx/">FuelFinderMX</a>
                        </li>
                        <li class="custom-text text-left"><i class="fa-brands fa-whatsapp"></i> Whatsapp Business: <a
                                href="https://wa.me/526145520929">FuelFinderMX</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>